<h4 matTooltip="Params of component - common for all animations">
  Component params
  <mat-icon aria-hidden="false" class="tooltip-icon" aria-label="Params of component - common for all animations"
            fontIcon="information"></mat-icon>
</h4>

<div class="compound-param-container ">
  <mat-form-field appearance="outline">
    <mat-label>Background</mat-label>
    <mat-select [(ngModel)]="params.background" (ngModelChange)="onUpdate()">
      <mat-option value="url('assets/media/corollaSedan_1000x750.jpg')">Corolla Sedan</mat-option>
      <mat-option value="url('assets/media/corollaHatchback_1000x750.jpg')">Corolla Hatchback</mat-option>
      <mat-option value="url('assets/media/yarsCross_1000x750.jpg')">Yaris Cross</mat-option>
      <mat-option value="url('assets/media/sky.jpg')">Sky by night</mat-option>
      <mat-option value="white">white</mat-option>
      <mat-option value="customBackgroundColor">custom color</mat-option>
      <mat-option value="customBackgroundImage">custom local file</mat-option>
      <mat-option value="customUrlBackgroundImage">URL</mat-option>
    </mat-select>
  </mat-form-field>
  <ngx-colors
    *ngIf="params.background === 'customBackgroundColor'"
    class="compound-param-child" ngx-colors-trigger
    [(ngModel)]="customBackgroundColor" (ngModelChange)="onUpdate()">
  </ngx-colors>
  <label *ngIf="params.background === 'customBackgroundImage'"
         class="no-margin compound-param-child custom-file-upload">
    <input type="file" accept="image/*" (change)="onFileUpload($event)">
    Choose file
  </label>
  <label *ngIf="params.background === 'customUrlBackgroundImage'"
         class="no-margin compound-param-child custom-file-url-input">
    <input type="text" (change)="onUrlEntered($event)" style="border: none">
  </label>

</div>

<div class="flex-controls-container">
  <mat-form-field appearance="outline" style="max-width: 120px">
    <mat-label>Width</mat-label>
    <input matInput type="number" [(ngModel)]="params.width" (ngModelChange)="onUpdate()">
  </mat-form-field>

  <mat-form-field appearance="outline" style="max-width: 120px">
    <mat-label>Height</mat-label>
    <input matInput type="number" [(ngModel)]="params.height" (ngModelChange)="onUpdate()">
  </mat-form-field>

  <div class="compound-param-container" style="max-width: 140px">
    <div
      matTooltip="Component will match width of a parent container"
      style="display: flex">
      <mat-label
        class="mat-slide-toggle-label"
      >Match parent
      </mat-label>
      <mat-icon aria-hidden="false" class="tooltip-icon" style="top: -6px; left: -20px"
                aria-label="Component will match width of a parent container"
                fontIcon="information"></mat-icon>
    </div>
    <mat-slide-toggle
      [(ngModel)]="params.matchParent"
      (ngModelChange)="onUpdate()">
    </mat-slide-toggle>
  </div>
</div>

<h4 matTooltip="Params of animation - can be different for each animation">
  Animation params
  <mat-icon aria-hidden="false" class="tooltip-icon"
            aria-label="Params of animation - can be different for each animation" fontIcon="information"></mat-icon>
</h4>

<div style="max-height: 100%; overflow-y: auto; padding-top: 4px">
  <div class="compound-param-container ">
    <mat-form-field appearance="outline">
      <mat-label>Animation</mat-label>
      <mat-select [(ngModel)]="params.animation" (ngModelChange)="onUpdate(); getAnimationParams();">
        <mat-option *ngFor="let animation of animationList" [value]="animation">{{animation}}</mat-option>
      </mat-select>
    </mat-form-field>
    <label class="no-margin compound-param-child custom-file-upload">
      <input type="file" accept="application/javascript, text/javascript" (change)="onAnimationFileUpload($event)">
      Add animation
    </label>
  </div>

  <mat-form-field appearance="outline">
    <mat-label>Text</mat-label>
    <input matInput [(ngModel)]="params.text" (ngModelChange)="onUpdate()">
  </mat-form-field>

  <ng-container *ngIf="animationParams">
    <ng-container *ngFor="let key of animationParamsKeys">

      <div
        *ngIf="animationParams[key].type==='image'"
        class="compound-param-container ">
        <mat-form-field appearance="outline">
          <mat-label>{{animationParams[key].label}}</mat-label>
          <mat-select [(ngModel)]="params[key]" (ngModelChange)="onUpdate()">
            <mat-option value="assets/media/philips-oneblade-h.png">philips oneblade</mat-option>
            <mat-option value="assets/media/philips-shaver-h.png">philips shaver</mat-option>
            <mat-option value="customBackgroundColor" disabled >custom color</mat-option>
            <mat-option value="customBackgroundImage" disabled>custom local file</mat-option>
            <mat-option value="customUrlBackgroundImage" disabled>URL</mat-option>
          </mat-select>
        </mat-form-field>
        <ngx-colors
          *ngIf="params[key] === 'customBackgroundColor'"
          class="compound-param-child" ngx-colors-trigger
          [(ngModel)]="customBackgroundColor" (ngModelChange)="onUpdate()">
        </ngx-colors>
        <label *ngIf="params[key] === 'customBackgroundImage'"
               class="no-margin compound-param-child custom-file-upload">
          <input type="file" accept="image/*" (change)="onFileUpload($event)">
          Choose file
        </label>
        <label *ngIf="params[key] === 'customUrlBackgroundImage'"
               class="no-margin compound-param-child custom-file-url-input">
          <input type="text" (change)="onUrlEntered($event)" style="border: none">
        </label>

      </div>

      <mat-form-field *ngIf="animationParams[key].type==='input'" appearance="outline">
        <mat-label>{{animationParams[key].label}}</mat-label>
        <input matInput [(ngModel)]="params[key]" (ngModelChange)="onUpdate()">
      </mat-form-field>

      <mat-form-field *ngIf="animationParams[key].type==='number'" appearance="outline">
        <mat-label>{{animationParams[key].label}}</mat-label>
        <input matInput type="number" [(ngModel)]="params[key]" (ngModelChange)="onUpdate()"
               [min]="animationParams[key]['min']" [max]="animationParams[key].max">
      </mat-form-field>

      <mat-form-field *ngIf="animationParams[key].type==='select'" appearance="outline">
        <mat-label>{{animationParams[key].label}}</mat-label>
        <mat-select [(ngModel)]="params[key]" (ngModelChange)="onUpdate()">
          <mat-option *ngFor="let option of animationParams[key].options"
                      [value]="option"
          >{{option}}</mat-option>
        </mat-select>
      </mat-form-field>

      <div
        *ngIf="animationParams[key].type==='color'"
        class="compound-param-container">
        <mat-form-field appearance="outline">
          <mat-label>{{animationParams[key].label}}</mat-label>
          <mat-select [(ngModel)]="params[key]" (ngModelChange)="onUpdate()">
            <mat-option value="black">black</mat-option>
            <mat-option value="white">white</mat-option>
            <mat-option value="#666">gray</mat-option>
            <mat-option value="customColor">custom color
            </mat-option>
          </mat-select>
        </mat-form-field>
        <ngx-colors
          *ngIf="params.color === 'customColor'"
          class="compound-param-child" ngx-colors-trigger
          [(ngModel)]="customColor" (ngModelChange)="onUpdate()">
        </ngx-colors>
      </div>

      <div
        *ngIf="animationParams[key].type==='boolean'"
        class="compound-param-container slide-toggle__spacing">
        <mat-slide-toggle
          [(ngModel)]="params[key]"
          (ngModelChange)="onUpdate()">
          <span class="slide-label-span">{{animationParams[key].label}}</span>
        </mat-slide-toggle>
      </div>

    </ng-container>
  </ng-container>

  <div style="display: block; height: 24px"></div>
</div>
